<?xml version="1.0" standalone="yes"?>

<Paper uid="A83-1004">
<Title>A Robust P o r t a b l e N a t u r a l L a n g u a g e D a t a B a s e I n t e r f a c e</Title>
<Section position="2" start_page="0" end_page="28" type="abstr">
<SectionTitle>
3. The Data Base Connection 2. NLP overview
</SectionTitle>
<Paragraph position="0"> The formal language the NLP uses to represent meaning is a variant of semantic nets [Quillian 8]. For example, the utterances &amp;quot;The color of the house is green,&amp;quot; &amp;quot;The house's color is green.&amp;quot; &amp;quot;Green ,~ the color that the house is.&amp;quot; would all be ~ransformed to: Consider the data base given by the following scheme: Parts(pno,pname,color.cosl,weight) Spj( sno,pno,jno.quantity ,m, y ) Suppliers and proiects have a number, )~ame and c~tV Parts ha'.,: a number, name, color, cost and weight Supplier wl(~,,unphe,, a quanntYof parts pno to prolect /no in month ,nor year The data base connection has four parts: gl Isa: &amp;quot;colored Tense: present Colored: g2 Color: g3 lsa: &amp;quot;house Definite: the Isa: &amp;quot;color Value: green I. Connecting each relation to the appropriate concept: Suppliers - &gt; &amp;quot;supplier fi2. Connecting each attribute to the appropriate concept: leg., Spj(sno,pno,jno,cost,quantity)) depended on the supplier in which the cost ol a part 4. C r e a t i n g pseudo relations Pseudo Cities jcity,scity This creates a pseudo relation, Cities(cname), so that the query building algorithm can treat all attributes as if they belong to a relation. The query produced by the system will refer to the Cities relation. A postprocessor is used to remove references to pseudo relations from the final query. Pseudo relations are important because they ensure uniform handling of attributes. With the pseudo Cities relation, questions like &amp;quot;Who supplies every city? = and &amp;quot;List the cities.&amp;quot; can be treated identically to &amp;quot;Who supplies every project'?&amp;quot; and &amp;quot;List the suppliers.&amp;quot; The remainder of the data base connection is a set of switches which provide information on how to print out the relations. whether all proper nouns have been defined or are to be inferred. whether relations are multivalued, etc. The switch settings and the four components above constitute the entire data base connection, Nothing else iS needed. The network of concepts in the N L P should only be augmented for a particular data base; never changed. Yet different data base schemes will require different representations for the same word. For example, depending on the data base scheme, it could be correct to represent &amp;quot;box&amp;quot; as either, gl g2 g3 [sa: &amp;quot;part Conditions: &amp;quot;named(gl,box) Isa: &amp;quot;container Conditions: &amp;quot;named(g2.box) [sa: &amp;quot;box 3. Capturing the information implicit in each relation: Parts(pno,pname,color,cost,weight ) &amp;quot;indexnumberp i n d e x n u m b e r - &gt; pno n u m b e r e d - &gt; Parts &amp;quot;named n a m e - &gt; pname n a m e d - &gt; Parts &amp;quot;colored  color - &gt; color c o l o r e d - &gt; Parts costobj - &gt; Parts &amp;quot;weighs w e i g h t - &gt; weight w e i g h t o b j - &gt; Parts Projects(jno.jnamedcity) &amp;quot;indexnumberp indexnumber - &gt; jno n u m b e r e d - &gt; Projects &amp;quot;named name - &gt; jname n a m e d - &gt; Projects &amp;quot;located location - &gt; jetty located - &gt; Prolects Suppliers(sno,sname,scity) &amp;quot;indexnumberp indexnumber - &gt; sno n u m b e r e d - &gt; Suppliers &amp;quot;named name - &gt; sname n a m e d - &gt; Suppliers &amp;quot;located location - &gt; sctty located - &gt; Suppliers %pl O~no.pno.lno.quant Hv.m.y ) &amp;quot;supply supplier - &gt; '.;no supplied - &gt; pno suppliee - &gt; mo (cardinality-of pno) - &gt; quantity u m e - &gt; m.y &amp;quot;spend spender - &gt; 1no s  p e n d f o r -&gt; pno amount (&amp;quot; cost quantity) The a m o u m case of &amp;quot;spend maps to a c o m p u t a t i o n rather than a ,~mgle a t t r i b u t e It' all the attributes in the c o m p u t a h o n are not present ,n the relation being defined, the query building program ioms ,n the necessary extra relations. So the definition of &amp;quot;spend ~mrks equally well irl tile example scheme as well as in a scheme 26 The solution is to define each word to map to the lowest possible concept. W h e n a concept is e n c o u n t e r e d that has a data base relation associated with )t. there is no problem. If there )s no relauon associated with a concept, the N L p searchs For a concept that d o e s correspond to a relation and is also a generalization ot&amp;quot; the concept in question. I f one is found, it is used with an appropriate condilion, usually &amp;quot;tilled or &amp;quot;named. So &amp;quot;box&amp;quot; has a definition which m a p s to &amp;quot;box. In the data base c o n n e c t i o n given above. &amp;quot;box&amp;quot; would be instantiated as a &amp;quot;=part&amp;quot; since &amp;quot; ' b o x &amp;quot; is a r e f i n e m e n t of &amp;quot;'part&amp;quot; and no relation maps to &amp;quot;box,&amp;quot; Using the Connection The information in the data base connection ts primarily used m building the query (section .~). But It IS ~llso used Io augment the knowledge base of Ihe N L P The data base connection is used to overwrite the NLP's ca~e preferences. Since I o c a w d - &gt; S u p p h e r s ()r Projects. the preference ot&amp;quot; localed ts spec)fied to &amp;quot;suppliers or &amp;quot;protects. This enables the NLP to interpret the first noun group )n &amp;quot;Do ,m', suppliers that supply widgets located nl london also supply ,~cre',vs )&amp;quot; as &amp;quot;'suppliers in London that supply widgets&amp;quot; rather than &amp;quot;supphers that ,;upph London wldgets&amp;quot; This )s in contrast to [Gawron 31 which u'..;es ,i separate &amp;quot;disambiguator&amp;quot; phase to ehmlnale parses that do 11()i make sense =n the conceptual scheme of the dala base. Tile additional preference informamm supplied bv the data base connection is used to induce coercions (section 2.) thai would rlot be made in the absence of the connection (~r under ,mother data fibase scheme. &amp;quot;Who supplies London&amp;quot; does not break any real world preferences, but does break one of the preferences induced by this data base scheme, namely that Suppliee is a &amp;quot;project. London. a &amp;quot;city, is coerced to &amp;quot;project via the path [*project located *located /ocanon cityl and the question is understood to mean &amp;quot;Who supplies projects which are in London.&amp;quot; As mentioned in Section 2., the NLP determines the meanin~ of many modifications by searching for connections in a semantic net. The data base connection is used to augment and highlight the existing network of the NLP. I f the user says, &amp;quot;What colors do parts come in?', the NLP can infer that the meaning of &amp;quot;come-in&amp;quot; intended by the user is &amp;quot;colored since the only path through the net between &amp;quot;color and &amp;quot;part derived from the case preferences induced by the data base connection is ['part colored &amp;quot;colored color &amp;quot;color] Similarly, when given the noun group &amp;quot;London suppliers&amp;quot; the meaning is determined by tracing the shortest path through the highlighted net, ['supplier located'located Iocanon &amp;quot;city] The longer path connecting &amp;quot;supplier and &amp;quot;city, ['supplier supplier &amp;quot;supply suppliee *project located &amp;quot;location location *city] which means &amp;quot;the suppliers that supply to london projects&amp;quot; is found when the NLP rejects the first meaning because of context, If the user says &amp;quot;What are the locations of the London suppliers&amp;quot; the system assumes the second meaning since the first (in the domain of this data base scheme) leads to a tautological reading. The NLP is able to infer that &amp;quot;The locations of the suppliers located in London&amp;quot; is tautological while &amp;quot;The locations of the suppliers located in England&amp;quot; is not, because the data base connection has specified &amp;quot;located to be a single valued concept with its Iocarton case typed to &amp;quot;city. I f the system were asked for the locations of suppliers in England, and it knew England was a country, the question would be interpreted as &amp;quot;the cities of the suppliers that are located in cities located in England.&amp;quot; The NLP treats most true-l'aise questions with indefinites as requests for the data which would make the statement true. The question's meaning is &amp;quot;to show the subset of london proiects that are supplied by Blake.&amp;quot; The query building algorithm builds up the query recursively Given an instantiated concept with cases, =t expands the contents of each case and links the results together with the relation corresponding to the concept. Given an instantiated concept with conditions, it expands each condition. For the example, we have.</Paragraph>
<Paragraph position="1"> Expand gl Expand g2, the Element of gl Expand gg, the Condition of g2.</Paragraph>
<Paragraph position="2"> Expand g3, the Supplier case of gg. Expand g9, the Condition of g3. From the data base connection, a &amp;quot;named whose named case is a *supplier is realized by the Suppliers relation using the sname attribute So we have, g9 - select tram Suppliers where sname -- blake From the data base connection, a &amp;quot;supply is realized by the Spj relation. This results in, gga -- project]no/i'om.joinSpj to  g8 -- joingga toProjects g8 is the projects supplied by Blake.</Paragraph>
<Paragraph position="3"> Expand 84, the set gl is a subset of, by expanding its element. g6 Expand glO.</Paragraph>
<Paragraph position="4"> the Condition of gb Expand g7, the location case of glO yielding g l l -- select #am Cities wherecname - london A &amp;quot;located with a &amp;quot;project in the Iocotedcase ~s realized by the Projects relation using the ]city attribute. So we have. glOa -- join Projects Io gl I where]city = cname glOb - proiect ]no /'romglOa glO - ]oinglOb toProjects g[0 is the projects in London.</Paragraph>
<Paragraph position="5"> Intersect the expansions of g2 and g4 and project the prolect names. gl3 = pro/eel]name lrom imersectton g 8 glO 5. A trtee of the query building algorithm.</Paragraph>
<Paragraph position="6"> The query budding algorithm is illustrated by tracmg its operation on the question, &amp;quot;Does blake supply any prolects in london'?&amp;quot; The entire query is, The NLP's meaning representation I'or this question ts shown below. gO Isa: &amp;quot;show g5 Isa: &amp;quot;name Value: blake g9 Isa: &amp;quot;named Tense: present Named: g3 Name: g5 Isa: &amp;quot;tocated Tense: present Located: gb Location: g7 Isa: &amp;quot;named Tense: present Named: g7 Name: g12 Isa: *name Value: london Tense: present Toshow: g l gO [sa: &amp;quot;set Element: 2 Subset-of': g4 Isa: &amp;quot;protect Isa: &amp;quot;project Element-of: g4 Conditions: glO glO lsa: city Conditions: gll Isa: &amp;quot;supply Tense: Present Suppler: g3 Suppliee: g2 gl [ g9 = select/romSuppliers where s n a m e = blake g8a -- /~'oiecrjno #om ioin Spj to g9 g8 = loin gga to Projects gl0 = select #am Projects where icily = london g 13 -- prelect iname lrom mter'~e('tlo~t g8 g I0 where the: extra loin resulting f'rom the pseudo (:h=e~ relation ha', been rernoved by the post processor (section 3 ) Entirely as a side effe,'t of the way the query rs generated, the -,,,,,tern can easily correct any l'alse assumptions made by the u~,,2r [Kaplan 71. For example, if there were no projects in London. gill would be empty and system would respond, generating Irom the instantiated concept glO li.e., the names used in query correspond to the names used in the knowledge representatmnL &amp;quot;There arc no suppliers located in London.&amp;quot; No additional &amp;quot;'.=oiated presupposition&amp;quot; mechanism is requ+red.</Paragraph>
<Paragraph position="7"> The remainder of this section discusses several aspects o the query building process that the trace does not show. Negations are handled by introducing a set difference when necessary If the example query were &amp;quot;Does Blake supply any projects that aren't in London?&amp;quot;, the expansion of g7 would have been.</Paragraph>
<Paragraph position="8"> I f we ask. &amp;quot;Who frequents a bar that serves a beer John likes?&amp;quot;. we get the following query. 81 82 g3 84 85 =&amp;quot; select from Likes where drinker - john project beer l'rom g 1 - .join Serves to 82 =&amp;quot; project bar I~om g3 &amp;quot;&amp;quot; join Frequents to 84 Expand g7. the location case of glO yielding g i l a - select [romCities wherecname -- london gl 1 - difference o f Cities a n d g l la Conjunctions are handled by introducing an an intersection or union. I f the example query were &amp;quot;Does Blake supply any projects in London or Paris'?', the /ocanon case of g10 would have. been the conjunction 813.</Paragraph>
<Paragraph position="9"> I f we ask &amp;quot;Who frequents a bar that serves a beer that he likes?&amp;quot; the correct query, is.</Paragraph>
<Paragraph position="10"> isa &amp;quot;conjunction Type: or Conjoins: g7 g14 [sa: &amp;quot;city Conditions: g l 5 lsa: &amp;quot;named Named: g15 Name: g l 6 Isa: &amp;quot;name Value: paris glb In the first query &amp;quot;beer&amp;quot; was the only attribute projected from g l [n the second, the system projected both &amp;quot;beer&amp;quot; and &amp;quot;drinker&amp;quot;, because in expanding &amp;quot;a beer he likes&amp;quot; it needed to expand an instantiated concept (the one representing &amp;quot;who&amp;quot;) that was already being expanded. All of these cases interact gracefully with one another. For example. there is no problem in handling &amp;quot;Who supplies every project that is not supplied by blake and bowles&amp;quot;.</Paragraph>
<Paragraph position="11"> The result of expanding gl3 would be, [n general, &amp;quot;or&amp;quot; becomes a union and &amp;quot;and&amp;quot; becomes an intersection. However, if an &amp;quot;and&amp;quot; conjunction is in a single valued case (information obtained from the data base connection), a union is used instead. Thus &amp;quot;Who supplies london and paris?&amp;quot; is interpreted as &amp;quot;Who supplies both London and Paris'?&amp;quot; and &amp;quot;Who is in London and Pans?&amp;quot; is interpreted as &amp;quot;Who is in London and who ~s m Paris?&amp;quot; )n the example data base scheme.</Paragraph>
<Paragraph position="12"> 6. Advantages of this approach The system can understand anything it has a concept about. regardless o f whether the concept is attached to a relation in the data base scheme. In the Suppliers data base from Secuon 4., parts had costs and weights associated with them, but not sizes. I f a user asks &amp;quot;How big are each of the parts?&amp;quot; and the interface has a &amp;quot;size primitive (which it does), the query building process wdl attempt to find the relation which &amp;quot;size maps to and on fading wdl report back to the user. &amp;quot;There is no information in the data base about the size of the parts.&amp;quot; This gives the user some informatmn about the what the data base contains, An answer like &amp;quot;1 don't know what &amp;quot;big&amp;quot; means.&amp;quot; would leave the user wondering whether size information was in the data base and obtainable if only the &amp;quot;right&amp;quot; word was used. The system can interpret user statements that are not queries. If the user says &amp;quot;A big supplier is a supplier that supplies more than 3 projects&amp;quot; the NLP can use, the definition qn answering later queries. The definition is not made on a &amp;quot;string&amp;quot; basis e.g., substttuting the words of one side of the definition for the other Instead. whenever the query building algorithm encounters an mstantiated concept that is a supplier wnh the condition &amp;quot;size~x. big) it builds a query substnuting the condiuon from the definition that it can expand as a data base query Thus the .~vstern can handle &amp;quot;big london suppliers&amp;quot; and answer &amp;quot;Which sunpliers are big&amp;quot; which it couldn't if ~t were doing strlct string substitution. This Facility can be used to bootstrap common definitions In ,~ commercial flights application, with data base scheme, Flights(fl#,carrier,from.to,departure,arrival.stops.cost ) the word &amp;quot;nonstop&amp;quot; is defined to the system in English as, &amp;quot;A nonstop flight is a night that does not make any stops &amp;quot; and then saved along wuh the rest of the system's defimt~ons.  Quantifiers are handled by a post processing phase. &amp;quot;Does blake supply every project in London?&amp;quot; is handled identically to &amp;quot;Does Blake supply a prolect in London'?&amp;quot; except that the expansion of &amp;quot;projects m London&amp;quot; is marked so that the post processor will be called. The post processor adds on a set of commands which check that the set difference of London projects and London prolects that Blake supplies is empty. The rasulhn 8 query is. gl = =_2 g3 = g4 = =_5 = gO =</Paragraph>
<Paragraph position="14"> jcity - london /otnSpl togl tomg3 to g2 protect jno from g2 protect ino /tom g4 {hl]~'rem'e org5 andgO empn, g7 ] h e first tour commands are the query for &amp;quot;Does Blake supply a llrolect m London'?&amp;quot;. The last tour check that no project in London is not supplied by Blake. -\ minor modification is needed to cover cases in which the query building algorithm is expanding an instantiated concept that refercnces an instuntiated concept that is being expanded in a higher recursmve call The following examples illustrate this. Consider the data base scheme below, taken from [Ullman ql.</Paragraph>
<Paragraph position="15"> Coercions (section 2.) can be used solve problems that may require inferences in other systems. [Grosz 6] discusses the query &amp;quot;Is there a doctor within 200 miles of Philadelphia&amp;quot; in the context of a scheme in which doctors are on ships and ships have distances from cities, and asserts that a system which handles this query must be able to inter that if a doctor is on a ship, and the ship is with 200 miles of Philadelphia, then the doctor is within 200 miles of Philadelphia. Using coercions, the query would be understood as &amp;quot;is there a ship with a doctor on it that is within 200 miles of Philadelphia?', which solves the problem immediately. Since the preference information is only used to choose among competing interpretations, broken preferences can still be understood and responded to. The preference for the supplier case is specified to supplier but if the user says &amp;quot;How many parts does the sorter project supply?&amp;quot; the NLP will find the only interpretation and respond &amp;quot;projects do not supply parts, suppliers do.&amp;quot; Ambiguities inherent in attribute values are handled using the same methods which handles words with multiple definitions. For example, 1980 may be an organization number, a telephone extension, a number, or a year. The NLP has a rudimentary (so far) expert system inference mechanism which can easily be used by the DBAP. One of the rules it uses is &amp;quot;If x is a precondition of y and z knows y is true then z knows x was and may still be true&amp;quot; One of the ['acts in the NLP knowledge base is that being married is a precondition of being divorced or widowed. I f a user asks &amp;quot;Did Fred Smith used to be married?&amp;quot; in a data base with the relation Employees(name, marital-status) the system can answer correctly by using its inference mechanism. The exact method is as follows. The data base application receives the true-false question: &amp;quot;Fred Smith was married and Fred Smith is no longer married&amp;quot; The system handles all the examples in this paper as well as a wide range of others (Appendix A.). Several different data bases schemes have been connected to the system for demonstrations, including one &amp;quot;real data base&amp;quot; abstracted from the on-line listing of the Bell Laboratories Company Directory.</Paragraph>
<Paragraph position="16"> 9. Since the data base includes only current marital status information. the only way to answer the first part of the question is to inl'cr it from some other information in the data base. The data base application sends the query to the NLP inference mechanism which would ordinarily attempt to answer it by matching it against its knowledge base or by finding a theorem which would gives it something else to match ['or When called by the data base application, the inference mechanism simply uses its rules base to decide what it should match ['or, and then returns to the data base program. In this, example, the inference mechanism receives &amp;quot;Fred Smith was married&amp;quot; and using the precondition rule mentioned above, returns to the data base program, &amp;quot;Is Fred Smith divorced&amp;quot; or &amp;quot;is Fred Smith widowed&amp;quot;, which can be answered by the data base. The DBAP can call the inference mechanism recursively if necessary.</Paragraph>
<Paragraph position="17"> Appendix A: Sample Questions and Answers does every department head in 1135 have an office in holmde[? No. all heads Ihat work For center number 11.]5 are not located in an office in ho who isn't alles,h g is the head not located in an ofi~ce in ho that works for center number [ 135 who has been with us for longer than fred smith? 7. Implementation Status and Details The DBAP ~s fully implemented and debugged. The NLP is ~mplemented and sail growing. Both are implemented in Franz Lisp. a dialect of LISP Language processing and query generai~on are performed m virtually real time (average 1-3 cpu seconds) on a Vax I 1-780 The system ~s intended to be used with u Data Base Management system. The interface between the DBAP and the I-)BMS is a ,,tralghtforward translator from relational algebra to the query language of Ihe DflMS I have written a Ir;.mslator I'or Polaris [Gielan 41.</Paragraph>
<Paragraph position="18"> There are no employees that have worked ('or you ['or more than the length or&amp;quot; the time fred smith has worked for ~.'~'~u list the employees who used to be married and are not married now, paul rochester, verlon biggs and willie davis are the empin~ee,~ that were married and that are not married now.</Paragraph>
<Paragraph position="19"> fi production between february 1979 and april 1981 how much does the m i x e r project spend on widgets f r o m blake 440 is how much was spent by the m i x e r proiect on widgets supplied by blake to it how much did the mixer project spend on each part widget - 649 box - 3 &amp;quot; print the drinkers that frequent only bars that serve some beer that they like george and john are the drinkers that frequent only bars that serve some beers liked by them l l 3 5 2 - 888 - widget - april 1981 11352 - 133 - screw - jan 1980 11354 - 133 - widget - ian 1980 w h o flies b e t w e e n l o n d o n a n d paris twa a n d pan a m are the a i r l i n e s that fly f r o m l o n d o n into paris get m e a flight to paris f r o m l o n d o n b e f o r e 3 p m a flight before 1500 into paris f r o m london: )1# airline departure arrival plane stops price dclO the latest flight o u t oJ&amp;quot; l o n d o n the latest flight f r o m london: I1# airline to departure arrival plane stops price I twa paris 1500 1700 dclO 3 280 &amp;quot; who supplies more than two projects howles and blake are the suppliers that supply to more than 2 proiccts who supplies more than the boss project the suppliers that supply to the projects besides the boss project ,ire: decker, blake, howl,cs and white w h o supplies more prolects than Decker howles and blake are the suppliers that supply to m o r e projects than the number o f Lhe projects that are supplied to by decker list the suppliers who supply projects m cities they are not in the suppliers that supply to the proiects Iocuted in the cities in which they are not located in are: decker, blake, h o w l e s and while how manv parts does white supply l'here are 9 parts supplied by white many different parts does while supply There are 2 klnds o f parts supplied by white what are they 'iupplies the mosl kinds o f paris h~wles ~s the ,;upplier lh;.ll supplies the most kinds of pilrts how many does it supply There are 4 kinds rH' parts supplied by the suppliers that supply lhe most kinds of parts</Paragraph>
</Section>
</Paper>

